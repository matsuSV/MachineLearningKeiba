# ■ 基本設計

以下のサイトのレース情報を取集し機械学習させる

https://www.netkeiba.com/

### ① 競馬サイトからレース結果を取得する
### ② レース結果を整形する

***
# ■ 詳細設計

## ① 競馬サイトからレース結果を取得する

### レースidを生成する
Placeクラス

|引数|例|

|対象年度|2019|

クラス生成時に対象年度（例：2019）を引数に受け取る。現状は1年分のみを対象とする。

以下のパターンからレースid(例：201901010101)を作成する
- 開催場：10場
- 開催期間：5期間
- 開催日：8日間
- レース数：12レース

### レース結果を取得する
Raceクラス

クラス生成時にレースid（例：['201901010101']）を引数に受け取る。既に保持しているレース結果を取得する。空のデータフレームを取得する。

何回も取得するのは冗長なため一度取得できたレース情報はローカルへ保持する
1. レースidリスト内の１つのレースidを対象としてレース結果を取得する
2. 既にレース結果を保持している場合はスキップとする
3. 対象サイトからレースidを用いてdataframeとしてデータを取得する
4. 後続処理のためにdataframeのインデックスを「レースid」に置き換える
5. レース結果を取得できたらレースidをresult.txtへ書き込む
6. レース結果をresult.pickleを書き込む
7. サイト負荷軽減のため0.5秒待機する

## ② レース結果を整形する
1. 着順に数字以外の文字列が含まれているものを取り除く
2. 年齢を性と年齢に分ける
3. 馬体重が現体重(±増減値)という表記なので体重と体重変化に分ける
4. データをint, floatへ変換する
5. 不要な列を削除する

# 単体試験とカバレッジ計測
(venv) PS C:\Users\shota\PycharmProjects\MachineLearningKeiba> pytest

(venv) PS C:\Users\shota\PycharmProjects\MachineLearningKeiba> coverage run -m pytest

(venv) PS C:\Users\shota\PycharmProjects\MachineLearningKeiba> coverage html
